@inject AuthenticationStateProvider auth
@inject EinsteinHacking.Logic.ChallengeLogic ChallengeLogic
@inject EinsteinHacking.Logic.UserStatisticLogic StatisitcLogic

<AuthorizeView>
    <Authorized>
        <a @onclick="RefreshScore" href="#">Your Score: @score</a>
        <a href="Identity/Account/Manage" method="post">Hello, @context.User.Identity.Name!</a>
        <form class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="/" method="post">
        </form>
        <a href="Identity/Account/Logout">Log Out</a>
    </Authorized>
    <NotAuthorized>
        <a href="Identity/Account/Register">Register</a>
        <a href="Identity/Account/Login">Log in</a>
    </NotAuthorized>
</AuthorizeView>



@code {
    private int score { get; set; }
    private string username;

    protected override void OnInitialized()
    {
        username = auth.GetAuthenticationStateAsync().Result.User.Identity.Name;
        RefreshScore();
    }

    private void RefreshScore()
    {
        score = StatisitcLogic.GetUserScore(username);
    }
}
